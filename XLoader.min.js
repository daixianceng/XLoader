(function(e){e.fn.extend({XLoader:function(t){var n=e(this);var r=e('<div id="XLoaderContainer"></div>');var i=location.href;var s=true;var o={id:"XLoaderTable"};var u={number:{text:"No.","class":"table-col-1"},image:{text:"Picture","class":"table-col-2"},name:{text:"Name","class":"table-col-2"},size:{text:"Size","class":"table-col-1"},textarea:{text:"Description","class":"table-col-2"}};var a={};var f={name:"descriptions[]"};var l="imageNames[]";var c="";var h=function(t,n){for(var r in n){if(e.isPlainObject(t[r])&&e.isPlainObject(n[r])){h(t[r],n[r])}else{t[r]=n[r]}}};if(typeof t.container!=="undefined"){r=e(t.container)}else{n.after(r)}if(typeof t.target!=="undefined"){i=t.target}if(t.registerStyle===false){s=false}if(e.isPlainObject(t.tableOptions)){h(o,t.tableOptions)}if(e.isPlainObject(t.columnOptions)){(function(){for(var n in u){if(e.isPlainObject(t.columnOptions[n])){h(u[n],t.columnOptions[n])}else{delete u[n]}}})()}if(e.isPlainObject(t.imageOptions)){h(a,t.imageOptions)}if(e.isPlainObject(t.textareaOptions)){h(f,t.textareaOptions)}if(typeof t.hiddenFieldName!=="undefined"){l=t.hiddenFieldName}if(typeof t.resourcesUrl!=="undefined"){c=t.resourcesUrl}if(s){e("body").append('<style type="text/css">#XLoaderTable{} #XLoaderTable .table-col-1{width:100px;} #XLoaderTable .table-col-2{width:200px;} #XLoaderTable img{max-width:200px;} #XLoaderTable td{text-align:center;} #XLoaderTable textarea{resize:none;width:180px;height:100px;padding:5px;}</style>')}var p=e('<div style="display:none;"><iframe name="XLoaderFrame"></iframe><form action="'+i+'" method="post" enctype="multipart/form-data" target="XLoaderFrame"></form></div>').appendTo("body");var d=e("<table><thead><tr></tr></thead><tbody></tbody></table>");n.change(function(){if(this.files.length===0)return;var t=e('<input type="file" name="'+n.attr("name")+'" multiple>').get(0);t.files=this.files;p.find("form").empty().append(t).submit()});n.parents("form").submit(function(){n.attr("disabled",true)});(function(){for(var t in o){d.attr(t,o[t])}for(var n in u){var r=e("<th></th>");for(var t in u[n]){if(t==="text"){r.text(u[n][t])}else{r.attr(t,u[n][t])}}d.find("thead tr").append(r)}})();(function(){var t=false;var n=0;e.extend({XLoaderData:function(i){var s=e.parseJSON(i);if(!s||s.length===0)return;if(!t){r.append(d);t=true}for(var o=0;o<s.length;o++){n++;var c=e("<tr></tr>");for(var h in u){switch(h){case"number":c.append("<td>"+n+"</td>");break;case"image":var p=e('<td><img src="'+s[o].uri+'"></td>');for(var v in a){if(v==="src")continue;p.find("img").attr(v,a[v])}c.append(p);break;case"name":c.append("<td>"+s[o].name+'<input type="hidden" name="'+l+'" value="'+s[o].name+'"></td>');break;case"size":c.append("<td>"+s[o].size+"</td>");break;case"textarea":var p=e("<td><textarea></textarea></td>");for(var v in f){p.find("textarea").attr(v,f[v])}if(s[o].description){p.find("textarea").val(s[o].description)}c.append(p);break}}d.find("tbody").append(c)}}})})();(function(){if(c!==""){e.ajax({url:c,type:"post",timeout:3e4,dataType:"text",success:function(t){e.XLoaderData(t)},error:function(e,t,n){alert(t)}})}})()}})})(jQuery)